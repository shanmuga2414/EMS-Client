{"ast":null,"code":"var _jsxFileName = \"/home/wallace/development/dhanraj/emsClient/src/components/Signup.jsx\";\nimport React from \"react\";\nimport Joi from \"joi-browser\";\nimport Heading from \"./common/Heading\";\nimport Form from \"./common/Form\";\nimport auth from \"../services/authService\";\nimport * as userService from \"../services/userService\";\nimport { Redirect } from \"react-router-dom\";\n\nclass Signup extends Form {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: {\n        name: \"\",\n        email: \"\",\n        phone: \"\",\n        password: \"\"\n      },\n      errors: {}\n    };\n    this.schema = {\n      name: Joi.string().required().label(\"Name\"),\n      email: Joi.string().required().email().label(\"Email\"),\n      phone: Joi.string().required().min(10).label(\"Phone\"),\n      password: Joi.string().required().min(5).label(\"Password\")\n    };\n\n    this.doSubmit = async () => {\n      try {\n        // Call the server\n        const response = await userService.register(this.state.data);\n        auth.loginWithJwt(response.headers[\"x-auth-token\"]);\n        window.location = \"/\";\n      } catch (ex) {\n        const errors = { ...this.state.errors\n        };\n        errors.name = ex.response.data;\n        this.setState({\n          errors\n        });\n      }\n    };\n  }\n\n  render() {\n    if (auth.getCurrentUser()) return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 39\n      }\n    });\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Heading, {\n      title: \"Signup Form\",\n      desc: \"This is a modified jumbotron that occupies the entire horizontal space of its parent.\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 col-md-offset-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }\n    }, this.renderInput(\"name\", \"Name\"), this.renderInput(\"email\", \"Email\"), this.renderInput(\"phone\", \"Phone\"), this.renderInput(\"password\", \"Password\", \"password\"), this.renderButton(\"Signup\"))));\n  }\n\n}\n\nexport default Signup;","map":{"version":3,"sources":["/home/wallace/development/dhanraj/emsClient/src/components/Signup.jsx"],"names":["React","Joi","Heading","Form","auth","userService","Redirect","Signup","state","data","name","email","phone","password","errors","schema","string","required","label","min","doSubmit","response","register","loginWithJwt","headers","window","location","ex","setState","render","getCurrentUser","handleSubmit","renderInput","renderButton"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Joi from \"joi-browser\";\nimport Heading from \"./common/Heading\";\nimport Form from \"./common/Form\";\nimport auth from \"../services/authService\";\nimport * as userService from \"../services/userService\";\nimport { Redirect } from \"react-router-dom\";\n\nclass Signup extends Form {\n  state = {\n    data: {\n      name: \"\",\n      email: \"\",\n      phone: \"\",\n      password: \"\",\n    },\n    errors: {},\n  };\n\n  schema = {\n    name: Joi.string().required().label(\"Name\"),\n    email: Joi.string().required().email().label(\"Email\"),\n    phone: Joi.string().required().min(10).label(\"Phone\"),\n    password: Joi.string().required().min(5).label(\"Password\"),\n  };\n\n  doSubmit = async () => {\n    try {\n      // Call the server\n      const response = await userService.register(this.state.data);\n      auth.loginWithJwt(response.headers[\"x-auth-token\"]);\n      window.location = \"/\";\n    } catch (ex) {\n      const errors = { ...this.state.errors };\n      errors.name = ex.response.data;\n      this.setState({ errors });\n    }\n  };\n\n  render() {\n    if (auth.getCurrentUser()) return <Redirect to=\"/\" />;\n    return (\n      <React.Fragment>\n        <Heading\n          title=\"Signup Form\"\n          desc=\"This is a modified jumbotron that occupies the entire horizontal space of\n                its parent.\"\n        />\n        <div className=\"col-md-4 col-md-offset-4\">\n          <form onSubmit={this.handleSubmit}>\n            {this.renderInput(\"name\", \"Name\")}\n            {this.renderInput(\"email\", \"Email\")}\n            {this.renderInput(\"phone\", \"Phone\")}\n            {this.renderInput(\"password\", \"Password\", \"password\")}\n            {this.renderButton(\"Signup\")}\n          </form>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}